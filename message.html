<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶ˆæ¯ä¸­å¿ƒ</title>
    <style>
        /* å…¨å±€æ ·å¼ */
        :root {
            --primary-color: #653EB3;
            --primary-light: #8C6FD2;
            --primary-dark: #4C2D99;
            --danger-color: #F35252;
            --warning-color: #E6A733;
            --success-color: #3BB950;
            --orange-color: #F28335;
            --deep-purple: #6D2763;
            --teal-color: #56A0B0;
            --gray-color: #838383;
            --light-gray: #E0E0E0;
            --white: #FFFFFF;
            --black: #333333;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        body {
            background-color: #F5F5F5;
            color: var(--black);
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        /* æ¶ˆæ¯ä¸­å¿ƒæ ·å¼ */
        .message-center {
            display: flex;
            flex-direction: column;
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 20px;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .message-header h2 {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
            margin: 0;
        }

        .message-filters {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 14px;
            color: var(--gray-color);
        }

        .form-select {
            padding: 8px 12px;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            font-size: 14px;
            min-width: 150px;
            background-color: var(--white);
        }

        .search-button {
            padding: 8px 15px;
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .search-button:hover {
            background-color: var(--primary-dark);
        }

        .message-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message-item {
            display: flex;
            background-color: #F8F8F8;
            border-radius: 8px;
            padding: 15px;
            gap: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            cursor: pointer;
        }

        .message-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .message-item.unread {
            background-color: rgba(101, 62, 179, 0.05);
            border-left: 4px solid var(--primary-color);
        }

        .message-icon {
            font-size: 24px;
            margin-right: 5px;
        }

        .message-icon.alert {
            color: var(--danger-color);
        }

        .message-icon.task {
            color: var(--orange-color);
        }

        .message-icon.system {
            color: var(--teal-color);
        }

        .message-content {
            flex: 1;
        }

        .message-header-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .message-title {
            font-weight: 600;
            font-size: 16px;
        }

        .message-time {
            color: var(--gray-color);
            font-size: 14px;
        }

        .message-body {
            font-size: 14px;
            line-height: 1.5;
            color: var(--black);
        }

        /* åˆ†é¡µæ ·å¼ */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
        }

        .page-button {
            padding: 8px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            background-color: var(--white);
            cursor: pointer;
            transition: all 0.2s;
        }

        .page-button:hover {
            background-color: var(--primary-light);
            color: var(--white);
            border-color: var(--primary-light);
        }

        .page-numbers {
            display: flex;
            gap: 10px;
        }

        .page-number {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .page-number:hover {
            background-color: rgba(101, 62, 179, 0.1);
        }

        .page-number.active {
            background-color: var(--primary-color);
            color: var(--white);
        }

        /* å“åº”å¼è°ƒæ•´ - æ¶ˆæ¯ä¸­å¿ƒ */
        @media (max-width: 768px) {
            .message-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .message-filters {
                width: 100%;
                flex-direction: column;
                gap: 10px;
            }

            .filter-group {
                width: 100%;
            }

            .message-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .message-icon {
                margin-bottom: 10px;
            }

            .message-header-row {
                flex-direction: column;
                gap: 5px;
            }
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 80%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .modal-header h2 {
            font-size: 18px;
            color: var(--primary-color);
        }

        .close-modal {
            font-size: 24px;
            cursor: pointer;
            color: var(--gray-color);
        }

        .modal-body {
            padding: 20px;
        }

        /* é€šçŸ¥å¾½ç« æ ·å¼ */
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--danger-color);
            color: var(--white);
            font-size: 12px;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <h1>æ¶ˆæ¯ä¸­å¿ƒç³»ç»Ÿ</h1>
    
    <!-- é¡µé¢å†…å®¹å°†é€šè¿‡JavaScriptåŠ è½½ -->
    <div id="message-container"></div>

    <!-- æ¶ˆæ¯è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div class="modal" id="messageDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>æ¶ˆæ¯è¯¦æƒ…</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <!-- æ¶ˆæ¯è¯¦æƒ…å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </div>
    </div>

    <script>
        // DOMåŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // åŠ è½½æ¶ˆæ¯ä¸­å¿ƒé¡µé¢å†…å®¹
            loadMessagePage();
            
            // åˆå§‹åŒ–æ¨¡æ€æ¡†
            initModals();
        });

        /**
         * åˆå§‹åŒ–æ¨¡æ€æ¡†åŠŸèƒ½
         */
        function initModals() {
            // å…³é—­æŒ‰é’®
            const closeButtons = document.querySelectorAll('.close-modal');
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    closeModal(modal);
                });
            });
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeModal(this);
                    }
                });
            });
        }

        /**
         * æ‰“å¼€æ¨¡æ€æ¡†
         * @param {HTMLElement} modal - è¦æ‰“å¼€çš„æ¨¡æ€æ¡†å…ƒç´ 
         */
        function openModal(modal) {
            if (typeof modal === 'string') {
                modal = document.getElementById(modal);
            }
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
        }

        /**
         * å…³é—­æ¨¡æ€æ¡†
         * @param {HTMLElement} modal - è¦å…³é—­çš„æ¨¡æ€æ¡†å…ƒç´ 
         */
        function closeModal(modal) {
            if (typeof modal === 'string') {
                modal = document.getElementById(modal);
            }
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        /**
         * åŠ è½½æ¶ˆæ¯ä¸­å¿ƒé¡µé¢å†…å®¹
         */
        function loadMessagePage() {
            const container = document.getElementById('message-container');
            
            container.innerHTML = `
                <div class="message-center">
                    <div class="message-header">
                        <h2>æ¶ˆæ¯ä¸­å¿ƒ</h2>
                        <div class="message-filters">
                            <div class="filter-group">
                                <label>æ¶ˆæ¯ç±»å‹</label>
                                <select class="form-select" id="message-type-filter">
                                    <option value="all">å…¨éƒ¨æ¶ˆæ¯</option>
                                    <option value="system">ç³»ç»Ÿæ¶ˆæ¯</option>
                                    <option value="task">ä»»åŠ¡æé†’</option>
                                    <option value="alert">é£é™©æé†’</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>æ—¶é—´èŒƒå›´</label>
                                <select class="form-select" id="message-time-filter">
                                    <option value="today">ä»Šæ—¥</option>
                                    <option value="week">è¿‘7å¤©</option>
                                    <option value="month" selected>è¿‘30å¤©</option>
                                    <option value="all">å…¨éƒ¨</option>
                                </select>
                            </div>
                            <button class="search-button" id="filter-messages-btn">ç­›é€‰</button>
                        </div>
                    </div>
                    
                    <div class="message-list">
                        <div class="message-item unread" data-id="1" data-type="alert">
                            <div class="message-icon alert">ğŸ””</div>
                            <div class="message-content">
                                <div class="message-header-row">
                                    <div class="message-title">è´·æ¬¾é€¾æœŸæé†’</div>
                                    <div class="message-time">ä»Šæ—¥ 10:30</div>
                                </div>
                                <div class="message-body">
                                    æ­å·AAç”µå­å•†åŠ¡æœ‰é™å…¬å¸çš„è´·æ¬¾è´¦æˆ·å°†åœ¨3å¤©åé€¾æœŸï¼Œè¯·åŠæ—¶è”ç³»å®¢æˆ·å¤„ç†ã€‚
                                </div>
                            </div>
                        </div>
                        
                        <div class="message-item unread" data-id="2" data-type="task">
                            <div class="message-icon task">ğŸ“</div>
                            <div class="message-content">
                                <div class="message-header-row">
                                    <div class="message-title">ä»»åŠ¡æˆªæ­¢æé†’</div>
                                    <div class="message-time">ä»Šæ—¥ 09:15</div>
                                </div>
                                <div class="message-body">
                                    æ‚¨æœ‰ä¸€ä¸ª"å®¢æˆ·ä¿¡ç”¨è¯„ä¼°"ä»»åŠ¡å°†åœ¨ä»Šæ—¥14:30æˆªæ­¢ï¼Œè¯·åŠæ—¶å¤„ç†ã€‚
                                </div>
                            </div>
                        </div>
                        
                        <div class="message-item" data-id="3" data-type="system">
                            <div class="message-icon system">â„¹ï¸</div>
                            <div class="message-content">
                                <div class="message-header-row">
                                    <div class="message-title">ç³»ç»Ÿæ›´æ–°é€šçŸ¥</div>
                                    <div class="message-time">æ˜¨æ—¥ 15:45</div>
                                </div>
                                <div class="message-body">
                                    ç³»ç»Ÿå°†äº2023å¹´6æœˆ18æ—¥å‡Œæ™¨2:00-4:00è¿›è¡Œç‰ˆæœ¬æ›´æ–°ï¼ŒæœŸé—´ç³»ç»Ÿå¯èƒ½æ— æ³•è®¿é—®ï¼Œè¯·æå‰åšå¥½ç›¸å…³å·¥ä½œå®‰æ’ã€‚
                                </div>
                            </div>
                        </div>
                        
                        <div class="message-item" data-id="4" data-type="alert">
                            <div class="message-icon alert">âš ï¸</div>
                            <div class="message-content">
                                <div class="message-header-row">
                                    <div class="message-title">é£é™©é¢„è­¦</div>
                                    <div class="message-time">2023-06-13 11:20</div>
                                </div>
                                <div class="message-body">
                                    ç³»ç»Ÿæ£€æµ‹åˆ°å®æ³¢YYè´¸æ˜“æœ‰é™å…¬å¸è¿‘æœŸé“¶è¡Œæµæ°´å¼‚å¸¸ï¼Œè¯·å…³æ³¨å®¢æˆ·ç»è¥çŠ¶å†µå˜åŒ–ã€‚
                                </div>
                            </div>
                        </div>
                        
                        <div class="message-item" data-id="5" data-type="task">
                            <div class="message-icon task">âœ…</div>
                            <div class="message-content">
                                <div class="message-header-row">
                                    <div class="message-title">ä»»åŠ¡å®Œæˆé€šçŸ¥</div>
                                    <div class="message-time">2023-06-12 16:30</div>
                                </div>
                                <div class="message-body">
                                    æ‚¨åˆ†é…ç»™ç‹å®¢æˆ·ç»ç†çš„"åˆåŒå®¡æ ¸"ä»»åŠ¡å·²å®Œæˆã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pagination">
                        <button class="page-button prev-button">ä¸Šä¸€é¡µ</button>
                        <div class="page-numbers">
                            <span class="page-number active">1</span>
                            <span class="page-number">2</span>
                            <span class="page-number">3</span>
                        </div>
                        <button class="page-button next-button">ä¸‹ä¸€é¡µ</button>
                    </div>
                </div>
            `;
            
            // ç»‘å®šæ¶ˆæ¯ä¸­å¿ƒäº‹ä»¶
            bindMessageEvents();
            
            // æ›´æ–°æœªè¯»æ¶ˆæ¯æ•°é‡
            updateNotificationBadge();
        }

        /**
         * ç»‘å®šæ¶ˆæ¯ä¸­å¿ƒçš„äº‹ä»¶
         */
        function bindMessageEvents() {
            // è·å–æ‰€æœ‰æ¶ˆæ¯é¡¹ç›®
            const messageItems = document.querySelectorAll('.message-item');
            
            // ä¸ºæ¯ä¸ªæ¶ˆæ¯é¡¹ç›®æ·»åŠ ç‚¹å‡»äº‹ä»¶
            messageItems.forEach(item => {
                item.addEventListener('click', () => {
                    const messageId = item.getAttribute('data-id');
                    // æ‰“å¼€æ¶ˆæ¯è¯¦æƒ…ï¼ˆæ­¤å¤„ä»…åšæ ‡è®°ä¸ºå·²è¯»å¤„ç†ï¼‰
                    markMessageAsRead(item);
                    // æ‰“å¼€æ¶ˆæ¯è¯¦æƒ…æ¨¡æ€æ¡†
                    openMessageDetailModal(messageId);
                });
            });
            
            // ç­›é€‰æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            const filterBtn = document.getElementById('filter-messages-btn');
            if (filterBtn) {
                filterBtn.addEventListener('click', filterMessages);
            }
            
            // åˆ†é¡µæŒ‰é’®äº‹ä»¶
            const prevButton = document.querySelector('.pagination .prev-button');
            const nextButton = document.querySelector('.pagination .next-button');
            const pageNumbers = document.querySelectorAll('.pagination .page-number');
            
            if (prevButton) {
                prevButton.addEventListener('click', () => {
                    alert('ä¸Šä¸€é¡µåŠŸèƒ½å°†åœ¨æœªæ¥ç‰ˆæœ¬å®ç°');
                });
            }
            
            if (nextButton) {
                nextButton.addEventListener('click', () => {
                    alert('ä¸‹ä¸€é¡µåŠŸèƒ½å°†åœ¨æœªæ¥ç‰ˆæœ¬å®ç°');
                });
            }
            
            if (pageNumbers.length) {
                pageNumbers.forEach(pageNum => {
                    pageNum.addEventListener('click', () => {
                        // ç§»é™¤å½“å‰æ¿€æ´»çŠ¶æ€
                        document.querySelector('.pagination .page-number.active').classList.remove('active');
                        // è®¾ç½®æ–°çš„æ¿€æ´»é¡µç 
                        pageNum.classList.add('active');
                        // å®é™…åº”ç”¨ä¸­åº”è¯¥è¿™é‡ŒåŠ è½½å¯¹åº”é¡µé¢çš„æ•°æ®
                        alert(`å°†åŠ è½½ç¬¬${pageNum.textContent}é¡µçš„å†…å®¹`);
                    });
                });
            }
        }

        /**
         * æ ‡è®°æ¶ˆæ¯ä¸ºå·²è¯»
         * @param {Element} messageItem æ¶ˆæ¯å…ƒç´ 
         */
        function markMessageAsRead(messageItem) {
            if (messageItem.classList.contains('unread')) {
                messageItem.classList.remove('unread');
                // å®é™…åº”ç”¨ä¸­åº”è¯¥å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œæ›´æ–°æ¶ˆæ¯çŠ¶æ€
                
                // æ›´æ–°é€šçŸ¥å¾½ç« 
                updateNotificationBadge();
            }
        }

        /**
         * æ‰“å¼€æ¶ˆæ¯è¯¦æƒ…æ¨¡æ€æ¡†
         * @param {string} messageId æ¶ˆæ¯ID
         */
        function openMessageDetailModal(messageId) {
            // è·å–å½“å‰æ¶ˆæ¯å†…å®¹
            const messageItem = document.querySelector(`.message-item[data-id="${messageId}"]`);
            if (!messageItem) return;
            
            const title = messageItem.querySelector('.message-title').textContent;
            const time = messageItem.querySelector('.message-time').textContent;
            const body = messageItem.querySelector('.message-body').textContent;
            const type = messageItem.getAttribute('data-type');
            
            let icon = '';
            if (type === 'alert') {
                icon = 'ğŸ””';
            } else if (type === 'task') {
                icon = 'ğŸ“';
            } else if (type === 'system') {
                icon = 'â„¹ï¸';
            }
            
            // è®¾ç½®æ¨¡æ€æ¡†å†…å®¹
            const modal = document.getElementById('messageDetailModal');
            const modalTitle = modal.querySelector('.modal-header h2');
            const modalBody = modal.querySelector('.modal-body');
            
            modalTitle.textContent = title;
            modalBody.innerHTML = `
                <div class="message-detail">
                    <div class="message-detail-header">
                        <div class="message-detail-icon ${type}">${icon}</div>
                        <div class="message-detail-time">${time}</div>
                    </div>
                    <div class="message-detail-body">
                        ${body}
                    </div>
                    <div class="message-detail-footer">
                        <p>æ¶ˆæ¯ç±»å‹: ${type === 'alert' ? 'é£é™©æé†’' : type === 'task' ? 'ä»»åŠ¡æé†’' : 'ç³»ç»Ÿæ¶ˆæ¯'}</p>
                        <p>æ¶ˆæ¯ID: ${messageId}</p>
                        <p>çŠ¶æ€: å·²è¯»</p>
                    </div>
                </div>
            `;
            
            // æ‰“å¼€æ¨¡æ€æ¡†
            openModal(modal);
        }

        /**
         * ç­›é€‰æ¶ˆæ¯
         */
        function filterMessages() {
            const typeFilter = document.getElementById('message-type-filter').value;
            const timeFilter = document.getElementById('message-time-filter').value;
            
            const messageItems = document.querySelectorAll('.message-item');
            
            // åº”ç”¨ç­›é€‰é€»è¾‘
            messageItems.forEach(item => {
                const messageType = item.getAttribute('data-type');
                
                // ç±»å‹ç­›é€‰
                let showByType = typeFilter === 'all' || messageType === typeFilter;
                
                // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥æ ¹æ®æ—¶é—´è¿›è¡Œç­›é€‰
                // æ­¤å¤„ç®€åŒ–å¤„ç†ï¼Œä»…æ ¹æ®ç±»å‹ç­›é€‰
                
                // è®¾ç½®æ˜¾ç¤ºæˆ–éšè—
                if (showByType) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
            
            // æ˜¾ç¤ºç­›é€‰ç»“æœæç¤º
            const typeText = document.getElementById('message-type-filter').options[document.getElementById('message-type-filter').selectedIndex].text;
            const timeText = document.getElementById('message-time-filter').options[document.getElementById('message-time-filter').selectedIndex].text;
            
            alert(`å·²ç­›é€‰: ç±»å‹(${typeText}), æ—¶é—´èŒƒå›´(${timeText})`);
        }

        /**
         * æ›´æ–°é€šçŸ¥å¾½ç« ï¼Œæ˜¾ç¤ºæœªè¯»æ¶ˆæ¯æ•°é‡
         */
        function updateNotificationBadge() {
            // è·å–æœªè¯»æ¶ˆæ¯æ•°é‡
            const unreadCount = document.querySelectorAll('.message-item.unread').length;
            
            // å¦‚æœæœ‰æœªè¯»æ¶ˆæ¯ï¼Œæ·»åŠ åœ¨é¡µé¢æ ‡é¢˜ä¸­æ˜¾ç¤º
            if (unreadCount > 0) {
                document.title = `(${unreadCount}) æ¶ˆæ¯ä¸­å¿ƒ`;
            } else {
                document.title = 'æ¶ˆæ¯ä¸­å¿ƒ';
            }
        }
    </script>
</body>
</html>
